* [Apache Tutorial: Dynamic Content with
  CGI](https://httpd.apache.org/docs/2.4/howto/cgi.html)

~~~bash
a2enmod cgi
joe /etc/apache2/mods-enabled/cgid.conf

# Socket for cgid communication
ScriptSock ${APACHE_RUN_DIR}/cgisock
# ScriptLog /var/log/apache2/cgi_log
<IfModule mod_cgid.c>
        <Directory /home/*/public_html/cgi-bin>
		Options ExecCGI
		SetHandler cgi-script   
        </Directory>
</IfModule>
# vim: syntax=apache ts=4 sw=4 sts=4 sr noet

/etc/init.d/apache2 reload
~~~

# First try (obsolete)

Setting the proper permissions

~~~bash
chmod -R g+w $BASILISK
adduser www-data popinet
adduser popinet www-data
~~~

i.e. www-data can now both write/overwrite in $BASILISK.

# Second try: Using suexec to run cgi script as correct user

[This page](https://www.digitalocean.com/community/tutorials/how-to-use-suexec-in-apache-to-run-cgi-scripts-on-an-ubuntu-vps) was useful

~~~bash
apt install apache2-suexec-custom
a2enmod cgi suexec rewrite headers proxy_http
chmod 755 $BASILISK/cgi-bin
chmod 700 $BASILISK/cgi-bin/page2html
chmod 700 $BASILISK/cgi-bin/ch2html
~~~

See [basilisk.conf]() and edit /etc/apache2/suexec/www-data, adding
only the lines

~~~bash
$BASILISK/cgi-bin
$BASILISK_WIKI/cgi-bin
~~~

Make link to [basilisk.conf]() to enable the site in Apache's configuration

~~~bash
cd /etc/apache2/sites-enabled/
ln -s $BASILISK/cgi-bin/basilisk.conf
systemctl restart apache2
~~~

Note that codemirror need to be installed in /wiki/static/codemirror

## Troubleshooting

If you get:

~~~bash
tail -f /var/log/apache2/error.log
access to /src/README denied (filesystem path '/home/popinet/basilisk') \
  because search permissions are missing on a component of the path
~~~

check that group/others have read/execute permissions on all
components of the path.
